{"version":3,"file":"vwo-fme-react-sdk.umd.development.js","sources":["../lib/services/LoggerService.ts","../lib/enum/LogMessageEnum.ts","../lib/utils/LogMessageUtil.ts","../lib/enum/HookEnum.ts","../lib/VWOContext.ts","../lib/VWOProvider.tsx","../lib/useVWOClient.ts","../lib/useGetFlag.ts","../lib/useGetFlagVariable.ts","../lib/useTrackEvent.ts","../lib/useSetAttribute.ts"],"sourcesContent":["/**\n * Copyright 2025 Wingify Software Pvt. Ltd.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * logger.ts - Global Logger Singleton\n */\nimport { LogManager } from '@wingify/service-logger';\n\nlet logger: LogManager | null = null;\n\n/**\n * Initializes the global logger instance.\n * This function should be called inside `VWOProvider` before logging is used anywhere in the application.\n *\n * @param {object} config - The logger configuration object.\n * @param {object} config.logger - Optional logging configuration (e.g., log level, transports).\n * @returns {void} No return value; initializes the logger instance.\n */\nexport function initLogger(config: any) {\n  if (!logger) {\n    logger = new LogManager(config?.logger || {});\n  }\n  return logger;\n}\n\n/**\n * Retrieves the global logger instance.\n * Ensures that `initLogger` has been called before attempting to use logging.\n *\n * @returns {LogManager} The global logger instance.\n */\nexport function getLogger(): LogManager {\n  if (!logger) {\n    logger = new LogManager({ level: 'error' });\n  }\n  return logger;\n}\n","/**\n * Copyright 2025 Wingify Software Pvt. Ltd.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport enum LogMessageEnum {\n  // common messages\n  VWO_CLIENT_MISSING = 'VWO Client is missing in {hookName} hook. Ensure VWOProvider is correctly initialized.',\n  INVALID_CONTEXT = 'Invalid user context in {hookName} hook. Ensure a valid userContext is provided.',\n  HOOK_ERROR = 'Error in {hookName} hook: {error}',\n  INVALID_HOOK_USAGE = '{hookName} must be used within a VWOProvider !!',\n\n  // VWO Provider Messages\n  VWO_PROVIDER_CLIENT_CONFIG_WARNING = 'VWOProvider Warning: Both `client` and `config` are provided. The `client` prop will take precedence, and the `config` props will be disregarded.',\n  VWO_PROVIDER_CONFIG_REQUIRED = 'VWOProvider Error: Either `client` or `config` must be provided.',\n  VWO_SDK_INITIALIZATION_FAILED = 'VWO-SDK Initialization failed: {error}',\n\n  // useTrackEvent Messages\n  VWO_TRACK_EVENT_NAME_REQUIRED = 'Event name is required for useTrackEvent hook and it should be a string',\n  VWO_TRACK_EVENT_ERROR = 'Error tracking event - {eventName}: {error}',\n\n  // useSetAttribute Messages\n  VWO_SET_ATTRIBUTE_MAP_REQUIRED = 'attributeMap (object having key-value pairs of user attributes) is required for useSetAttribute hook',\n  VWO_SET_ATTRIBUTE_ERROR = 'Error setting attributes: {error}',\n  VWO_SET_ATTRIBUTE_SUCCESS = 'User attributes set: {attributes}',\n\n  // useGetFlag Messages\n  VWO_NOT_READY_IN_USE_GET_FLAG = 'VWO is not ready in useGetFlag hook',\n  VWO_GET_FLAG_FEATURE_KEY_REQUIRED = 'Feature key is required for useGetFlag hook',\n  VWO_GET_FLAG_ERROR = 'Error fetching feature flag - {featureKey}: {error}',\n\n  // useGetFlagVariable Messages\n  VWO_GET_FLAG_VARIABLES_FLAG_REQUIRED = 'Flag is required for useGetFlagVariables hook and should be an object',\n  VWO_GET_FLAG_VARIABLES_ERROR = 'Error getting flag variables: {error}',\n  VWO_GET_FLAG_VARIABLE_REQUIRED = 'Flag and variable key are required for useGetFlagVariable hook',\n  VWO_GET_FLAG_VARIABLE_ERROR = 'Error getting flag variable: {error}',\n}\n","/**\n * Copyright 2025 Wingify Software Pvt. Ltd.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { isFunction } from '@wingify/util-data-type';\n\nconst nargs = /\\{([0-9a-zA-Z_]+)\\}/g;\n\n/**\n * Constructs a message by replacing placeholders in a template with corresponding values from a data object.\n *\n * @param {string} template - The message template containing placeholders in the format `{key}`.\n * @param {Record<string, any>} data - An object containing keys and values used to replace the placeholders in the template.\n * @returns {string} The constructed message with all placeholders replaced by their corresponding values from the data object.\n */\nexport function buildMessage(template: string, data: Record<string, any> = {}): string {\n  try {\n    return template.replace(nargs, (match, key, index) => {\n      // Check for escaped placeholders\n      if (template[index - 1] === '{' && template[index + match.length] === '}') {\n        return key;\n      }\n\n      // Retrieve the value from the data object\n      const value = data[key];\n\n      // If the key does not exist or the value is null/undefined, return an empty string\n      if (value === undefined || value === null) {\n        return '';\n      }\n\n      // If the value is a function, evaluate it\n      return isFunction(value) ? value() : value;\n    });\n  } catch (err) {\n    return template; // Return the original template in case of an error\n  }\n}\n\n/**\n * Logs an error message using the provided logger after building the message with template data.\n *\n * @param {any} logger - The logger instance used to log the error message.\n * @param {any} obj - An object containing data used to replace placeholders in the message template.\n * @param {string} message - The message template containing placeholders to be replaced with values from the obj parameter.\n */\nexport function logHookError(logger: any, obj: Record<string, any> = {}, message: string) {\n  try {\n    logger.error(buildMessage(message, obj));\n  } catch (error) {\n    console.error(`Error logging hook. Error: ${error}`);\n  }\n}\n","/**\n * Copyright 2025 Wingify Software Pvt. Ltd.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport enum HookEnum {\n  VWO_CLIENT = 'useVWOClient',\n  VWO_CONTEXT = 'useVWOContext',\n  VWO_GET_FLAG = 'useGetFlag',\n  VWO_GET_FLAG_VARIABLE = 'useGetFlagVariable',\n  VWO_GET_FLAG_VARIABLES = 'useGetFlagVariables',\n  VWO_TRACK_EVENT = 'useTrackEvent',\n  VWO_SET_ATTRIBUTE = 'useSetAttribute',\n}\n","/**\n * Copyright 2025 Wingify Software Pvt. Ltd.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { createContext, useContext } from 'react';\nimport { getLogger } from './services/LoggerService';\nimport { IVWOClient, IVWOContextModel } from 'vwo-fme-node-sdk';\nimport { LogMessageEnum } from './enum/LogMessageEnum';\nimport { buildMessage, logHookError } from './utils/LogMessageUtil';\nimport { HookEnum } from './enum/HookEnum';\ninterface VWOContextType {\n  vwoClient: IVWOClient | null;\n  userContext?: IVWOContextModel | null;\n  setUserContext?: (context: IVWOContextModel) => void;\n  isReady?: boolean;\n}\n\nexport const VWOContext = createContext<VWOContextType>({\n  vwoClient: null,\n  userContext: null,\n  setUserContext: undefined,\n  isReady: false,\n});\n\nexport const useVWOContext = (): VWOContextType | null => {\n  let logger;\n\n  try {\n    logger = getLogger();\n    // Fetch the context\n    const context = useContext(VWOContext);\n\n    // If the context is not found, throw an error\n    if (!context) {\n      logger.error(buildMessage(LogMessageEnum.INVALID_HOOK_USAGE, { hookName: HookEnum.VWO_CONTEXT }));\n      return null;\n    }\n    return context;\n  } catch (error) {\n    logHookError(logger, { error, hookName: HookEnum.VWO_CONTEXT }, LogMessageEnum.HOOK_ERROR);\n    return null;\n  }\n};\n","/**\n * Copyright 2025 Wingify Software Pvt. Ltd.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { useEffect, useState, ReactNode, useMemo } from 'react';\nimport { init, IVWOContextModel, IVWOClient, IVWOOptions } from 'vwo-fme-node-sdk';\nimport { VWOContext } from './VWOContext';\nimport { initLogger } from './services/LoggerService';\nimport { LogMessageEnum } from './enum/LogMessageEnum';\nimport { logHookError } from './utils/LogMessageUtil';\n\nexport interface VWOProviderWithClient {\n  client: IVWOClient;\n  userContext?: IVWOContextModel;\n  children: ReactNode;\n  fallbackComponent?: ReactNode;\n}\n\nexport interface VWOProviderWithConfig {\n  config: IVWOOptions;\n  userContext?: IVWOContextModel;\n  children: ReactNode;\n  fallbackComponent?: ReactNode;\n}\n\nexport type IVWOProvider = VWOProviderWithClient | VWOProviderWithConfig;\n\n/**\n * VWOProvider component to provide VWO client and configuration context to child components.\n *\n * @param props - The props for the VWOProvider component.\n * @returns A React element that provides the VWO client and configuration context to child components.\n */\nexport function VWOProvider(props: IVWOProvider): React.ReactElement {\n  const { userContext, children, fallbackComponent } = props;\n\n  const client = 'client' in props ? props.client : null;\n  const config = 'config' in props ? props.config : null;\n\n  const [vwoClient, setVwoClient] = useState<IVWOClient | null>(client || null);\n  const [context, setContext] = useState<IVWOContextModel | null>(userContext || null);\n  const [isReady, setIsReady] = useState<boolean>(false);\n\n  const memoizedConfig = useMemo(() => config || client?.options, []);\n\n  let logger;\n  // Initialize the VWO SDK instance only once when the component mounts or if config is updated\n  useEffect(() => {\n    try {\n      logger = initLogger(client?.options || config);\n\n      if(config && vwoClient) {\n        logger.warn(LogMessageEnum.VWO_PROVIDER_CLIENT_CONFIG_WARNING);\n      }\n      if (vwoClient) {\n        setIsReady(true);\n        return;\n      } else if (!config) {\n        logger.error(LogMessageEnum.VWO_PROVIDER_CONFIG_REQUIRED);\n        return;\n      }\n\n      const initializeVWO = async () => {\n        if (!vwoClient && config) {\n          // Initialize the VWO SDK instance if vwoClient is not already initialized\n          const instance = await init(config);\n          setVwoClient(instance);\n          setIsReady(true);\n        }\n      };\n\n      // Initialized only once\n      if (!vwoClient && config) {\n        initializeVWO();\n      }\n    } catch (error) {\n      logHookError(logger, error, LogMessageEnum.VWO_SDK_INITIALIZATION_FAILED);\n    }\n  }, [memoizedConfig]); // Re-run only when config changes\n\n  return (\n    <VWOContext.Provider value={{ vwoClient, userContext: context, setUserContext: setContext, isReady }}>\n      {fallbackComponent && !isReady ? fallbackComponent : children}\n    </VWOContext.Provider>\n  );\n};\n","/**\n * Copyright 2025 Wingify Software Pvt. Ltd.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { IVWOClient } from 'vwo-fme-node-sdk';\nimport { getLogger } from './services/LoggerService';\nimport { useVWOContext } from './VWOContext';\nimport { LogMessageEnum } from './enum/LogMessageEnum';\nimport { buildMessage, logHookError } from './utils/LogMessageUtil';\nimport { HookEnum } from './enum/HookEnum';\nconst defaultVwoClientResult: VWOClientResult = {\n  vwoClient: null,\n  isReady: false,\n};\n\nexport interface VWOClientResult {\n  vwoClient: IVWOClient | null;\n  isReady: boolean;\n}\n\n/**\n * Returns the VWO SDK client instance\n * @returns VWO SDK client instance\n */\nexport const useVWOClient = (): VWOClientResult => {\n  let logger;\n\n  try {\n    logger = getLogger();\n\n    const context = useVWOContext();\n\n    if (!context) {\n      logger.error(buildMessage(LogMessageEnum.INVALID_HOOK_USAGE, { hookName: HookEnum.VWO_CLIENT }));\n      return defaultVwoClientResult;\n    }\n\n    if (!context.isReady) {\n      return defaultVwoClientResult;\n    }\n\n    return {\n      vwoClient: context.vwoClient,\n      isReady: true,\n    };\n  } catch (error) {\n    logHookError(logger, { error, hookName: HookEnum.VWO_CLIENT }, LogMessageEnum.HOOK_ERROR);\n    return defaultVwoClientResult;\n  }\n};\n","/**\n * Copyright 2025 Wingify Software Pvt. Ltd.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useState, useEffect, useCallback, useMemo } from 'react';\nimport { useVWOContext } from './VWOContext';\nimport { getLogger } from './services/LoggerService';\nimport { isObject } from '@wingify/util-data-type';\nimport { Flag, IVWOContextModel } from 'vwo-fme-node-sdk';\nimport { LogMessageEnum } from './enum/LogMessageEnum';\nimport { buildMessage, logHookError } from './utils/LogMessageUtil';\nimport { HookEnum } from './enum/HookEnum';\nexport interface IFlag {\n  flag: Flag;\n  isReady: boolean;\n}\n\nconst createDefaultFlag = () =>\n  ({\n    isEnabled: () => false,\n    getVariables: (): unknown[] => [],\n    getVariable: <T = unknown>(key: string, defaultValue?: T) => defaultValue,\n  }) as unknown as Flag;\n\n/**\n * Custom hook to retrieve a feature flag using VWO client.\n *\n * @param {string} featureKey - The key of the feature flag to retrieve.\n * @param {Object} [context] - Optional user context to use for fetching the flag.\n * @returns {FlagResult} An object containing the flag and a readiness status.\n */\nexport const useGetFlag = (featureKey: string, context?: IVWOContextModel): IFlag => {\n  const defaultFlagResult: IFlag = {\n    flag: createDefaultFlag(),\n    isReady: false,\n  };\n  const { vwoClient, userContext, setUserContext, isReady } = useVWOContext();\n  const [flag, setFlag] = useState<Flag>(defaultFlagResult.flag);\n  const [isLoading, setIsLoading] = useState(true);\n\n  const logger = getLogger();\n\n  const stableUserContext = useMemo(() => {\n    return (context || userContext || {}) as IVWOContextModel;\n  }, [JSON.stringify(context || userContext || {})]);\n\n  const getFlag = useCallback(async () => {\n    try {\n      if (!isReady) {\n        logger.error(LogMessageEnum.VWO_NOT_READY_IN_USE_GET_FLAG);\n        return;\n      }\n\n      const result = await vwoClient.getFlag(featureKey, stableUserContext);\n      setFlag(result);\n\n      setUserContext(stableUserContext);\n    } catch (error) {\n      logHookError(logger, { error, featureKey }, LogMessageEnum.VWO_GET_FLAG_ERROR);\n    } finally {\n      setIsLoading(false);\n    }\n  }, [featureKey, stableUserContext, isReady]);\n\n  useEffect(() => {\n    try {\n      if (!featureKey) {\n        logger.error(LogMessageEnum.VWO_GET_FLAG_FEATURE_KEY_REQUIRED);\n        return;\n      }\n\n      if (!isObject(stableUserContext) || !stableUserContext.id) {\n        logger.error(buildMessage(LogMessageEnum.INVALID_CONTEXT, { hookName: HookEnum.VWO_GET_FLAG }));\n        return;\n      }\n      // Check if all required dependencies are available\n      // stableUserContext && stableUserContext.id - check is added to handle the case where VWOProvider is not initialized\n      if (isReady && vwoClient && stableUserContext) {\n        getFlag();\n      }\n    } catch (error) {\n      logHookError(logger, { error, featureKey }, LogMessageEnum.VWO_GET_FLAG_ERROR);\n    }\n  }, [featureKey, JSON.stringify(stableUserContext), isReady]);\n\n  return {\n    flag,\n    isReady: !isLoading && !!flag,\n  };\n};\n","/**\n * Copyright 2025 Wingify Software Pvt. Ltd.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { isObject } from '@wingify/util-data-type';\nimport { getLogger } from './services/LoggerService';\nimport { Flag } from 'vwo-fme-node-sdk';\nimport { LogMessageEnum } from './enum/LogMessageEnum';\nimport { logHookError } from './utils/LogMessageUtil';\n\n/**\n * Hook to get all variables from a flag\n * @param flag - The flag to get the variables from\n * @returns The variables from the flag\n */\nexport const useGetFlagVariables = (flag: Flag): Array<Record<string, unknown>> => {\n  let logger;\n\n  try {\n    logger = getLogger();\n\n    if (!flag || !isObject(flag)) {\n      logger.error(LogMessageEnum.VWO_GET_FLAG_VARIABLES_FLAG_REQUIRED);\n      return [];\n    }\n\n    return flag.getVariables();\n  } catch (error) {\n    logHookError(logger, { error }, LogMessageEnum.VWO_GET_FLAG_VARIABLES_ERROR);\n    return [];\n  }\n};\n\n/**\n * Hook to get a flag variable\n * @param flag - The flag to get the variable from\n * @param variableKey - The key of the variable to get\n * @param defaultValue - The default value to return if the variable is not found\n * @returns The value of the variable\n */\nexport const useGetFlagVariable = <T>(flag: Flag, variableKey: string, defaultValue: T): T => {\n  let logger;\n\n  try {\n    logger = getLogger();\n    if (!flag || !isObject(flag)) {\n      return defaultValue;\n    }\n\n    if (!variableKey) {\n      logger.error(LogMessageEnum.VWO_GET_FLAG_VARIABLE_REQUIRED);\n      return defaultValue;\n    }\n\n    return flag.getVariable(variableKey, defaultValue);\n  } catch (error) {\n    logHookError(logger, { error }, LogMessageEnum.VWO_GET_FLAG_VARIABLE_ERROR);\n    return defaultValue;\n  }\n};\n","/**\n * Copyright 2025 Wingify Software Pvt. Ltd.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { getLogger } from './services/LoggerService';\nimport { useVWOContext } from './VWOContext';\nimport { isObject, isString } from '@wingify/util-data-type';\nimport { LogMessageEnum } from './enum/LogMessageEnum';\nimport { buildMessage, logHookError } from './utils/LogMessageUtil';\nimport { HookEnum } from './enum/HookEnum';\nimport { IVWOClient, IVWOContextModel } from 'vwo-fme-node-sdk';\n/**\n * Interface for the return type of useTrackEvent hook\n */\nexport interface ITrackEvent {\n  trackEvent: (\n    eventName: string,\n    eventProperties?: Record<string, string | number | boolean>,\n  ) => Promise<Record<string, boolean>>;\n  isReady: boolean;\n}\n\n/**\n * Hook to provide the trackEvent function for tracking events.\n * @returns {ITrackEvent} Object containing trackEvent function and isReady boolean\n */\nexport const useTrackEvent = (): ITrackEvent => {\n  let logger;\n  let vwoClient: IVWOClient;\n  let userContext: IVWOContextModel;\n  let isReady: boolean;\n\n  try {\n    logger = getLogger();\n\n    // Fetch the vwoClient and userContext from the context\n    ({ vwoClient, userContext, isReady } = useVWOContext());\n  } catch (error) {\n    logHookError(logger, { error }, LogMessageEnum.VWO_TRACK_EVENT_ERROR);\n    return { trackEvent: () => Promise.resolve({}), isReady: false };\n  }\n  /**\n   * trackEvent function to be returned by the hook\n   * @param eventName - The name of the event to track\n   * @param eventProperties - The properties of the event (optional)\n   */\n  const trackEvent = async (\n    eventName: string,\n    eventProperties: Record<string, string | number | boolean> = {},\n  ): Promise<Record<string, boolean>> => {\n    try {\n      if (!isReady) {\n        logger.error(buildMessage(LogMessageEnum.VWO_CLIENT_MISSING, { hookName: HookEnum.VWO_TRACK_EVENT }));\n        return Promise.resolve({});\n      }\n      if (!eventName || !isString(eventName)) {\n        logger.error(LogMessageEnum.VWO_TRACK_EVENT_NAME_REQUIRED);\n        return Promise.resolve({});\n      }\n\n      // Ensure userContext is valid\n      if (!userContext || !isObject(userContext) || !userContext.id) {\n        logger.error(buildMessage(LogMessageEnum.INVALID_CONTEXT, { hookName: HookEnum.VWO_TRACK_EVENT }));\n        return Promise.resolve({});\n      }\n\n      return await vwoClient.trackEvent(eventName, userContext, eventProperties);\n    } catch (error) {\n      logHookError(\n        logger,\n        { error: error instanceof Error ? error.message : error, eventName },\n        LogMessageEnum.VWO_TRACK_EVENT_ERROR,\n      );\n      return Promise.resolve({});\n    }\n  };\n\n  return { trackEvent, isReady };\n};\n","/**\n * Copyright 2025 Wingify Software Pvt. Ltd.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useVWOContext } from './VWOContext';\nimport { isObject } from '@wingify/util-data-type';\nimport { getLogger } from './services/LoggerService';\nimport { LogMessageEnum } from './enum/LogMessageEnum';\nimport { buildMessage, logHookError } from './utils/LogMessageUtil';\nimport { HookEnum } from './enum/HookEnum';\nimport { IVWOClient } from 'vwo-fme-node-sdk';\nimport { IVWOContextModel } from 'vwo-fme-node-sdk';\n\n/**\n * Interface for the return type of useSetAttribute hook\n */\nexport interface ISetAttribute {\n  setAttribute: (attributeMap: Record<string, string | number | boolean>) => void;\n  isReady: boolean;\n}\n\n/**\n * Hook to return a function for setting user attributes.\n * @returns {ISetAttribute} Object containing setAttribute function and isReady boolean\n */\nexport const useSetAttribute = (): ISetAttribute => {\n  let logger;\n  let vwoClient: IVWOClient;\n  let userContext: IVWOContextModel;\n  let isReady: boolean;\n\n  try {\n    logger = getLogger();\n\n    // Fetch the vwoClient and userContext from the context\n    ({ vwoClient, userContext, isReady } = useVWOContext());\n  } catch (error) {\n    logHookError(logger, { error }, LogMessageEnum.VWO_SET_ATTRIBUTE_ERROR);\n    return { setAttribute: () => {}, isReady: false };\n  }\n  /**\n   * Function to set user attributes dynamically\n   * @param attributeMap - The map of attributes to set\n   */\n  const setAttribute = (attributeMap: Record<string, string | number | boolean>): void => {\n    try {\n      // Return a no-op function if vwoClient or userContext is not available\n      if (!isReady) {\n        logger.error(buildMessage(LogMessageEnum.VWO_CLIENT_MISSING, { hookName: HookEnum.VWO_SET_ATTRIBUTE }));\n        return;\n      }\n      if (!userContext || !isObject(userContext) || !userContext.id) {\n        logger.error(buildMessage(LogMessageEnum.INVALID_CONTEXT, { hookName: HookEnum.VWO_SET_ATTRIBUTE }));\n        return;\n      }\n      if (!attributeMap || !isObject(attributeMap) || Object.keys(attributeMap).length === 0) {\n        logger.error(LogMessageEnum.VWO_SET_ATTRIBUTE_MAP_REQUIRED);\n        return;\n      }\n\n      vwoClient.setAttribute(attributeMap, userContext); // Set the attributes\n\n      logger.info(\n        buildMessage(LogMessageEnum.VWO_SET_ATTRIBUTE_SUCCESS, {\n          attributes: JSON.stringify(attributeMap),\n        }),\n      );\n    } catch (error) {\n      logHookError(logger, { error }, LogMessageEnum.VWO_SET_ATTRIBUTE_ERROR);\n    }\n  };\n\n  return { setAttribute, isReady };\n};\n"],"names":["logger","initLogger","config","LogManager","getLogger","level","LogMessageEnum","nargs","buildMessage","template","data","replace","match","key","index","length","value","undefined","isFunction","err","logHookError","obj","message","error","console","HookEnum","VWOContext","createContext","vwoClient","userContext","setUserContext","isReady","useVWOContext","context","useContext","INVALID_HOOK_USAGE","hookName","VWO_CONTEXT","HOOK_ERROR","VWOProvider","props","children","fallbackComponent","client","setVwoClient","useState","setContext","setIsReady","memoizedConfig","useMemo","options","useEffect","warn","VWO_PROVIDER_CLIENT_CONFIG_WARNING","VWO_PROVIDER_CONFIG_REQUIRED","initializeVWO","instance","init","VWO_SDK_INITIALIZATION_FAILED","React","Provider","defaultVwoClientResult","useVWOClient","VWO_CLIENT","createDefaultFlag","isEnabled","getVariables","getVariable","defaultValue","useGetFlag","featureKey","defaultFlagResult","flag","setFlag","isLoading","setIsLoading","stableUserContext","JSON","stringify","getFlag","useCallback","VWO_NOT_READY_IN_USE_GET_FLAG","result","VWO_GET_FLAG_ERROR","VWO_GET_FLAG_FEATURE_KEY_REQUIRED","isObject","id","INVALID_CONTEXT","VWO_GET_FLAG","useGetFlagVariables","VWO_GET_FLAG_VARIABLES_FLAG_REQUIRED","VWO_GET_FLAG_VARIABLES_ERROR","useGetFlagVariable","variableKey","VWO_GET_FLAG_VARIABLE_REQUIRED","VWO_GET_FLAG_VARIABLE_ERROR","useTrackEvent","VWO_TRACK_EVENT_ERROR","trackEvent","Promise","resolve","eventName","eventProperties","VWO_CLIENT_MISSING","VWO_TRACK_EVENT","isString","VWO_TRACK_EVENT_NAME_REQUIRED","Error","useSetAttribute","VWO_SET_ATTRIBUTE_ERROR","setAttribute","attributeMap","VWO_SET_ATTRIBUTE","Object","keys","VWO_SET_ATTRIBUTE_MAP_REQUIRED","info","VWO_SET_ATTRIBUTE_SUCCESS","attributes"],"mappings":"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"}